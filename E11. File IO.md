# E11. File I/O

## 11.2 파일 입출력의 기본

- 표준 입출력 메서드

| 메서드    | 설명 |
| --------- | ---- |
| `input()` |      |
| `print()` |      |

- 파일 입출력 메서드

| 메서드         | 설명                       |
| -------------- | -------------------------- |
| `read()`       |                            |
| `readline()`   | 파일로부터 한 행을 읽는다. |
| `readlines()`  | 파일의 내용을 전부 읽는다. |
| `write()`      |                            |
| `writelines()` |                            |



### 11.2.1 파일 입출력의 기본 과정

- (1) 파일 열기
- (2) 파일 일기 및 파일 쓰기 작업
- (3) 파일 닫기



#### 11.2.1 파일 열기

```python
파일객체변수 = open("파일명", "모드")
```

- 파일의 열기 `모드`
- `파일명`: `C:/Temp/**.txt` 등

| 모드 | 설명                                                       |
| ---- | ---------------------------------------------------------- |
| 생략 | $r$과 동일                                                 |
| `r`  | 읽기 모드. 디폴트                                          |
| `w`  | 쓰기 모드. 기존에 파일이 있으면 덮어쓴다.                  |
| `r+` | 읽기/쓰기 겸용 모드                                        |
| `a`  | 쓰기 모드. 기존에 파일이 있으면 이어서 쓴다. append의 약어 |
| `t`  | 텍스트 모드. 텍스트 파일을 처리한다. 디폴트                |
| `b`  | 이진 모드. 이진 파일을 처리한다.                           |



#### 11.2.3 파일 닫기

```python
파일객체변수.close()
```



## 11.3 텍스트 파일 읽기

### 11.3.1 readline()으로 한 행 읽기

```python
inFp = None		# 입력 파일
inStr = ""		# 읽어 온 문자열

inFp = open("", "r")

inStr = inFp.readline()
print(inStr, end = "")

inFp.close()
```



### 11.3.2 readline()으로 전부 읽기

```python
inFp = None		# 입력 파일
inStr = ""		# 읽어 온 문자열

inFp = open("", "r")

while True:
    inStr = inFp.readline()
    if inStr == "":
    	break;    
    print(inStr, end = "")

inFp.close()
```



### 11.3.2 realines()로 전부 읽기

```python
inFp = None		# 입력 파일
inList = []		# 읽어 온 문자열

inFp = open("", "r")

inList = inFp.readlines()
print(inList)

inFp.close()
```



### with~as 문

- `close` 문을 사용하지 않으려면 다음과 같이 `with~as`문으로 파일을 연다.

```python
with open("", "r") as inFp:
    inList = inFp.readlines()
    print(inList)
```



### 11.3.3 realines()에서 파일의 내용을 한 행씩 출력하기

```python
inFp = None		# 입력 파일
inList, inStr = [], ""		# 읽어 온 문자열

inFp = open("", "r")

inList = inFp.readlines()
for inStr in inList:
    print(inStr, end="")

inFp.close()
```

 

### 11.3.4 type 명령어 구현하기

```
type 파일명
```

- 터미널에 해당 명령어를 입력하면 `파일명`의 내용을 읽어 출력한다.

```python
inFp = None		# 입력 파일
fName, inList, inStr = "", [], ""
# 파일 이름, 읽어 온 문자열, 한 행

fName = input("파일명을 입력하세요: ")
inFp = open(fName, "r")

inList = inFp.readlines()
for inStr in inList:
    print(inStr, end="")

inFp.close()
```



### 입력한 파일명이 없는 경우

- `inFp = open(fName, r)`에서 `fName`에 해당하는 파일이 없다면 오류가 발생한다. 이를 방지하기 위해 다음 메서드를 사용할 수 있다.



```python
os.path.exists(파일명)
```

- `파일명`의 파일이 존재하는지 검사한다.

```python
import os

inFp = None		# 입력 파일
fName, inList, inStr = "", [], ""
# 파일 이름, 읽어 온 문자열, 한 행

fName = input("파일명을 입력하세요: ")

if os.path.exists(fName):
    inFp = open("", "r")
    
    inList = inFp.readlines()
    for inStr in inList:
        print(inStr, end="")

    inFp.close()
else:
    inFp.close()
```



### 텍스트 문서 에러 날 경우

저장할 때 인코딩을 ANSI

다시 안 되면 UTF-8



## 11.4 텍스트 파일 쓰기

### 11.4.1 파일에 문자열 한 행 쓰기

```python
파일객체 = open(파일명, 파일모드)
파일객체.write(문자열)
파일객체.close()
```

- `파일객체`에 `문자열`을 쓴다.



```python
file = open('hello.text', "w")
file.write('Hello, world!')
file.close()
```



### 11.4.2 반복문으로 문자열 여러 행 쓰기

```python
with open('hello.txt', 'w') as file:
    for i in range(3):
        file.write("Hello, world! {0}\n".format(i))
```



### 11.4.3 writelines()로 한 행씩 파일에 쓰기

```python
outFp = None
outStr = ""

outFp = open("파일명", "w")

while True:
    outStr = input("내용 입력: ")
	if outStr != "":
        outFp.writelines(outStr+"\n")
	else:
        break

outFp.close()
print("정상적으로 파일에 씀")
```



### 11.4.4 copy 명령어 구현하기

```
copy 소스파일 타깃파일
```

- `타깃파일`에 `소스파일`의 내용이 복사된다.

```python
inFp, outFp = None, None
inStr, inList = "", []

inFp = open("소스파일명", "r")
outFp = open("타깃파일명", "w")

inList = inFp.readlines()
for inStr in inList:
    outFp.writelines(inStr)
    
inFp.close()
outFp.close()
print("파일이 정상적으로 복사되었음")
```


